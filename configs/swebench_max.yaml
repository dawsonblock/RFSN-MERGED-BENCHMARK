mode: swebench_max

# Upstream search
candidates_per_round: 24
rounds: 4
max_total_candidates: 80

# Ensemble planners (upstream only)
planners:
  - name: primary
    weight: 1.0
  - name: alt
    weight: 0.7
  - name: skeptic
    weight: 0.5

# Patch ranking weights
ranker:
  w_compile: 2.0
  w_unit_smoke: 3.0
  w_targeted_tests: 5.0
  w_static_risk: -2.0
  w_diff_size: -0.5

# Test strategy
tests:
  smoke_cmd: "python -m compileall -q ."
  unit_smoke_cmd: "pytest -q --maxfail=1 --disable-warnings"
  targeted_max: 20
  full_if_close: true

# Parallelism (upstream only)
worktrees:
  max_parallel: 6

# Cache
cache:
  enabled: true
  dir: ".rfsn_cache"
  ttl_seconds: 259200 # 3 days

# Safety "do not propose"
forbid_paths_prefix:
  - ".github/workflows/"
  - "ci/"
  - "Dockerfile"
  - "setup.py"
  - "pyproject.toml"

diff_limits:
  max_files: 8
  max_lines: 400

# LLM Providers for planners
llms:
  default:
    provider: openai
    model: gpt-4o-mini
    api_key_env: OPENAI_API_KEY
    temperature: 0.25
    max_tokens: 2400
    timeout_s: 120

  primary:
    provider: openai
    model: gpt-4o
    api_key_env: OPENAI_API_KEY
    temperature: 0.2
    max_tokens: 2600

  alt:
    provider: anthropic
    model: claude-3-5-sonnet-latest
    api_key_env: ANTHROPIC_API_KEY
    temperature: 0.25
    max_tokens: 2600

  skeptic:
    provider: openai
    model: gpt-4o
    api_key_env: OPENAI_API_KEY
    temperature: 0.15
    max_tokens: 2200
